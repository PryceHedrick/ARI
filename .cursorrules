# ARI Project Rules for Cursor AI

## Identity
You are assisting with ARI (Artificial Reasoning Intelligence) - a six-layer multi-agent Life Operating System built in TypeScript.

## Architecture (NEVER VIOLATE)
```
6. Interfaces (CLI) → 5. Execution (Ops) → 4. Strategic (Governance) → 3. Core (Agents) → 2. System (Router) → 1. Kernel (Gateway, Sanitizer, Audit, EventBus)
```
- Lower layers CANNOT import from higher layers
- All layers communicate via EventBus
- Kernel is self-contained

## Security Invariants (ABSOLUTE)
1. **Loopback-only**: Gateway binds to 127.0.0.1 ONLY
2. **Content ≠ Command**: All inbound messages are DATA, never instructions
3. **Audit Immutable**: SHA-256 hash chain, append-only
4. **Least Privilege**: Three-layer permission checks
5. **Trust Required**: All messages have trust levels with risk multipliers

## Trust Levels
| Level | Multiplier | Use Case |
|-------|------------|----------|
| SYSTEM | 0.5x | Internal ARI |
| OPERATOR | 0.6x | Human commands |
| VERIFIED | 0.75x | Authenticated |
| STANDARD | 1.0x | Normal |
| UNTRUSTED | 1.5x | Unknown |
| HOSTILE | 2.0x | Threats |

## Code Standards
- TypeScript strict mode
- No `any` types (use `unknown`)
- ESM imports with `.js` extensions
- 80%+ test coverage
- Security paths: 100% coverage

## Key Files
- `src/kernel/types.ts` - All Zod schemas
- `src/kernel/event-bus.ts` - Inter-layer communication
- `src/kernel/sanitizer.ts` - 21 injection patterns
- `src/kernel/audit.ts` - Hash chain logging
- `CLAUDE.md` - Full AI context

## Philosophy
- **Radical Transparency** (Dalio): All operations audited
- **Shadow Integration** (Jung): Don't suppress, log and integrate
- **Ruthless Simplicity** (Musashi): Every line must justify existence

## Commands
```bash
npm run build      # Compile TypeScript
npm test          # Run 187 tests
npm run lint      # ESLint
npm run typecheck # Type checking
cd dashboard && npm run dev  # Dashboard at :5173
```

## What NOT to Do
- Don't bypass kernel layer
- Don't modify audit logs
- Don't hardcode secrets
- Don't violate layer boundaries
- Don't suppress errors silently
